{"version":3,"sources":["../../src/client/repo.js"],"names":["opts","gc","callbackify","variadic","stat","stats","numObjects","repoSize","storageMax","version"],"mappings":";;;;;;kBAKe,UAAUA,IAAV,EAAgB;AAC7B,SAAO;AACLC,QAAIC,sBAAYC,QAAZ,CAAqB,wBAAO,cAAP,EAAuBH,IAAvB,CAArB,CADC;AAELI,UAAMF,sBAAYC,QAAZ,CACJ,mBACE,wBAAO,gBAAP,EAAyBH,IAAzB,CADF,EAEE,UAACK,KAAD,EAAW;AACT,UAAIA,KAAJ,EAAW;AACT,YAAI,oBAAUA,MAAMC,UAAhB,CAAJ,EAAiC;AAC/BD,gBAAMC,UAAN,GAAmB,sBAAYD,MAAMC,UAAlB,CAAnB;AACD;;AAED,YAAI,oBAAUD,MAAME,QAAhB,CAAJ,EAA+B;AAC7BF,gBAAME,QAAN,GAAiB,sBAAYF,MAAME,QAAlB,CAAjB;AACD;;AAED,YAAI,oBAAUF,MAAMG,UAAhB,CAAJ,EAAiC;AAC/BH,gBAAMG,UAAN,GAAmB,sBAAYH,MAAMG,UAAlB,CAAnB;AACD;AACF;;AAED,aAAOH,KAAP;AACD,KAlBH,CADI,CAFD;AAwBLI,aAAS,2BAAY,wBAAO,mBAAP,EAA4BT,IAA5B,CAAZ;AAxBJ,GAAP;AA0BD,C;;AAhCD;;AACA;;;;AACA;;AACA","file":"repo.js","sourcesContent":["import { caller } from 'postmsg-rpc'\nimport callbackify from 'callbackify'\nimport { post } from 'prepost'\nimport { isBigJson, bigFromJson } from '../serialization/big'\n\nexport default function (opts) {\n  return {\n    gc: callbackify.variadic(caller('ipfs.repo.gc', opts)),\n    stat: callbackify.variadic(\n      post(\n        caller('ipfs.repo.stat', opts),\n        (stats) => {\n          if (stats) {\n            if (isBigJson(stats.numObjects)) {\n              stats.numObjects = bigFromJson(stats.numObjects)\n            }\n\n            if (isBigJson(stats.repoSize)) {\n              stats.repoSize = bigFromJson(stats.repoSize)\n            }\n\n            if (isBigJson(stats.storageMax)) {\n              stats.storageMax = bigFromJson(stats.storageMax)\n            }\n          }\n\n          return stats\n        }\n      )\n    ),\n    version: callbackify(caller('ipfs.repo.version', opts))\n  }\n}\n"]}