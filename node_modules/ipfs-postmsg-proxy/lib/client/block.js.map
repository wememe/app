{"version":3,"sources":["../../src/client/block.js"],"names":["opts","put","callbackify","variadic","args","cid","blockFromJson","get","stat"],"mappings":";;;;;;kBAOe,UAAUA,IAAV,EAAgB;AAC7B,SAAO;AACLC,SAAKC,sBAAYC,QAAZ,CACH,kBACE,6BAAgB,CAAhB,CADF,EAEE,2BAAe,CAAf,CAFF,EAGE,YAAa;AAAA,wCAATC,IAAS;AAATA,YAAS;AAAA;;AACX,UAAIA,KAAK,CAAL,KAAWA,KAAK,CAAL,EAAQC,GAAvB,EAA4B;AAC1BD,aAAK,CAAL,EAAQC,GAAR,GAAc,oBAAUD,KAAK,CAAL,EAAQC,GAAlB,CAAd;AACD;;AAED,aAAOD,IAAP;AACD,KATH,EAUE,mBACE,wBAAO,gBAAP,EAAyBJ,IAAzB,CADF,EAEEM,oBAFF,CAVF,CADG,CADA;AAkBLC,SAAKL,sBAAYC,QAAZ,CACH,kBACE,6BAAgB,CAAhB,CADF,EAEE,uBAAa,CAAb,CAFF,EAGE,mBACE,wBAAO,gBAAP,EAAyBH,IAAzB,CADF,EAEEM,oBAFF,CAHF,CADG,CAlBA;AA4BLE,UAAMN,sBAAYC,QAAZ,CACJ,kBACE,6BAAgB,CAAhB,CADF,EAEE,uBAAa,CAAb,CAFF,EAGE,wBAAO,iBAAP,EAA0BH,IAA1B,CAHF,CADI;AA5BD,GAAP;AAoCD,C;;AA5CD;;AACA;;;;AACA;;AACA;;AACA;;AACA","file":"block.js","sourcesContent":["import { caller } from 'postmsg-rpc'\nimport callbackify from 'callbackify'\nimport { pre, post } from 'prepost'\nimport { preBlockToJson, blockFromJson } from '../serialization/block'\nimport { preCidToJson, cidToJson } from '../serialization/cid'\nimport { preBufferToJson } from '../serialization/buffer'\n\nexport default function (opts) {\n  return {\n    put: callbackify.variadic(\n      pre(\n        preBufferToJson(0),\n        preBlockToJson(0),\n        (...args) => {\n          if (args[1] && args[1].cid) {\n            args[1].cid = cidToJson(args[1].cid)\n          }\n\n          return args\n        },\n        post(\n          caller('ipfs.block.put', opts),\n          blockFromJson\n        )\n      )\n    ),\n    get: callbackify.variadic(\n      pre(\n        preBufferToJson(0),\n        preCidToJson(0),\n        post(\n          caller('ipfs.block.get', opts),\n          blockFromJson\n        )\n      )\n    ),\n    stat: callbackify.variadic(\n      pre(\n        preBufferToJson(0),\n        preCidToJson(0),\n        caller('ipfs.block.stat', opts)\n      )\n    )\n  }\n}\n"]}