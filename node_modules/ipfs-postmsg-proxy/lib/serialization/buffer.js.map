{"version":3,"sources":["../../src/serialization/buffer.js"],"names":["bufferFromJson","obj","Buffer","from","JSON","parse","data","bufferToJson","buf","__ipfsPostMsgProxyType","stringify","isBuffer","isBufferJson","preBufferFromJson","index","args","preBufferToJson","preArrayOfBufferToJson","preArrayOfBufferFromJson"],"mappings":";;;;;;;AAAA;;AAEO,IAAMA,0CAAiB,SAAjBA,cAAiB,CAACC,GAAD;AAAA,SAASC,OAAOC,IAAP,CAAYC,KAAKC,KAAL,CAAWJ,IAAIK,IAAf,EAAqBA,IAAjC,CAAT;AAAA,CAAvB;;AAEA,IAAMC,sCAAe,SAAfA,YAAe,CAACC,GAAD;AAAA,SAAU;AACpCC,4BAAwB,QADY;AAEpCH,UAAMF,KAAKM,SAAL,CAAeF,GAAf;AAF8B,GAAV;AAAA,CAArB;;AAKA,IAAMG,8BAAWT,OAAOS,QAAxB;AACA,IAAMC,sCAAe,SAAfA,YAAe,CAACX,GAAD;AAAA,SAASA,OAAOA,IAAIQ,sBAAJ,KAA+B,QAA/C;AAAA,CAArB;;AAEA,IAAMI,gDAAoB,SAApBA,iBAAoB,CAACC,KAAD,EAAW;AAC1C,SAAO,YAAa;AAAA,sCAATC,IAAS;AAATA,UAAS;AAAA;;AAClB,QAAIH,aAAaG,KAAKD,KAAL,CAAb,CAAJ,EAA+B;AAC7BC,WAAKD,KAAL,IAAcd,eAAee,KAAKD,KAAL,CAAf,CAAd;AACD;AACD,WAAOC,IAAP;AACD,GALD;AAMD,CAPM;;AASA,IAAMC,4CAAkB,SAAlBA,eAAkB,CAACF,KAAD,EAAW;AACxC,SAAO,YAAa;AAAA,uCAATC,IAAS;AAATA,UAAS;AAAA;;AAClB,QAAIJ,SAASI,KAAKD,KAAL,CAAT,CAAJ,EAA2B;AACzBC,WAAKD,KAAL,IAAcP,aAAaQ,KAAKD,KAAL,CAAb,CAAd;AACD;AACD,WAAOC,IAAP;AACD,GALD;AAMD,CAPM;;AASA,IAAME,0DAAyB,SAAzBA,sBAAyB,CAACH,KAAD;AAAA,SAAW,gCAAWA,KAAX,EAAkBH,QAAlB,EAA4BJ,YAA5B,CAAX;AAAA,CAA/B;AACA,IAAMW,8DAA2B,SAA3BA,wBAA2B,CAACJ,KAAD;AAAA,SAAW,gCAAWA,KAAX,EAAkBF,YAAlB,EAAgCZ,cAAhC,CAAX;AAAA,CAAjC","file":"buffer.js","sourcesContent":["import { preArrayOf } from './utils/prepost-array-of'\n\nexport const bufferFromJson = (obj) => Buffer.from(JSON.parse(obj.data).data)\n\nexport const bufferToJson = (buf) => ({\n  __ipfsPostMsgProxyType: 'Buffer',\n  data: JSON.stringify(buf)\n})\n\nexport const isBuffer = Buffer.isBuffer\nexport const isBufferJson = (obj) => obj && obj.__ipfsPostMsgProxyType === 'Buffer'\n\nexport const preBufferFromJson = (index) => {\n  return (...args) => {\n    if (isBufferJson(args[index])) {\n      args[index] = bufferFromJson(args[index])\n    }\n    return args\n  }\n}\n\nexport const preBufferToJson = (index) => {\n  return (...args) => {\n    if (isBuffer(args[index])) {\n      args[index] = bufferToJson(args[index])\n    }\n    return args\n  }\n}\n\nexport const preArrayOfBufferToJson = (index) => preArrayOf(index, isBuffer, bufferToJson)\nexport const preArrayOfBufferFromJson = (index) => preArrayOf(index, isBufferJson, bufferFromJson)\n"]}