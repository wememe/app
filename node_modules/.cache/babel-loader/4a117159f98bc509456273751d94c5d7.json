{"ast":null,"code":"import _readOnlyError from \"/Users/kenzo/Desktop/app/node_modules/@babel/runtime/helpers/esm/readOnlyError\";\nimport { store } from '../state/store';\nvar abi = [{\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"name\": \"_owner\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"name\": \"_operator\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"_approved\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"ApprovalForAll\",\n  \"type\": \"event\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"approve\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"name\": \"_owner\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"name\": \"_approved\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"Approval\",\n  \"type\": \"event\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"buy\",\n  \"outputs\": [],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": true,\n    \"name\": \"_from\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": true,\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"Transfer\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"totalCost\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"content\",\n    \"type\": \"string\"\n  }],\n  \"name\": \"Memed\",\n  \"type\": \"event\"\n}, {\n  \"anonymous\": false,\n  \"inputs\": [{\n    \"indexed\": false,\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"creator\",\n    \"type\": \"address\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"amount\",\n    \"type\": \"uint256\"\n  }, {\n    \"indexed\": false,\n    \"name\": \"reward\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"Rewarded\",\n  \"type\": \"event\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"numTokens\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"_content\",\n    \"type\": \"string\"\n  }],\n  \"name\": \"meme\",\n  \"outputs\": [],\n  \"payable\": true,\n  \"stateMutability\": \"payable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"numTokens\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"priceToMint\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"id\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"numTokens\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"rewardForBurn\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"_from\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"_data\",\n    \"type\": \"bytes\"\n  }],\n  \"name\": \"safeTransferFrom\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"_from\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"safeTransferFrom\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_approved\",\n    \"type\": \"bool\"\n  }],\n  \"name\": \"setApprovalForAll\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"constant\": false,\n  \"inputs\": [{\n    \"name\": \"_from\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_to\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"transferFrom\",\n  \"outputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"function\"\n}, {\n  \"inputs\": [],\n  \"payable\": false,\n  \"stateMutability\": \"nonpayable\",\n  \"type\": \"constructor\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_owner\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"balanceOf\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"balances\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"content\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }, {\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"creators\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"exists\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"getApproved\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"InterfaceId_ERC165\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bytes4\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_owner\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_operator\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"isApprovedForAll\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"name\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"num\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"ownerOf\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"poolBalance\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_interfaceId\",\n    \"type\": \"bytes4\"\n  }],\n  \"name\": \"supportsInterface\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"bool\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"symbol\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_index\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"tokenByIndex\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_owner\",\n    \"type\": \"address\"\n  }, {\n    \"name\": \"_index\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"tokenOfOwnerByIndex\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"_tokenId\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"tokenURI\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"topId\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"totalSupply\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"name\": \"totalSupply_\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"wememe\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"address\"\n  }],\n  \"payable\": false,\n  \"stateMutability\": \"view\",\n  \"type\": \"function\"\n}];\nethereum.enable().then(function (addrs) {\n  var addr = addrs[0];\n  var asdf = 234;\n  user.innerHTML = \"<threebox-address data-address='\".concat(addr, \"'></threebox-address>\");\n  var Wememe = web3.eth.contract(abi);\n  var wememe = Wememe.at('0x7B55a715AD5e82956CA6F3093D7Eb3C16C308a78');\n  shares.addEventListener('change', function (e, r) {\n    wememe.priceToMint.call(pid.value, shares.value, {}, function (e, price) {\n      wei.value = web3.fromWei(price, 'ether');\n    });\n  });\n  meme.addEventListener('click', function () {\n    wememe.priceToMint.call(mid.value, numShares.value, {}, function (e, price) {\n      wememe.meme(mid.value, numShares.value, contentHash.value, {\n        from: addr,\n        value: price\n      }, function (e, tx) {\n        console.log('meme', tx);\n      });\n    });\n  });\n  buyMeme.addEventListener('click', function () {\n    wememe.poolBalance.call(buyId.value, function (e, price) {\n      wememe.buy(buyId.value, {\n        from: addr,\n        value: price\n      }, function (e, tx) {\n        console.log('buy', tx);\n      });\n    });\n  });\n  wememe.topId.call(function (e, r) {\n    var num = r.toNumber();\n\n    var _loop = function _loop(i) {\n      wememe.num.call(i, function (e, num) {\n        wememe.content.call(i, function (e, content) {\n          wememe.poolBalance.call(i, function (e, staked) {\n            if (num < 3) {\n              memeData.innerHTML += \"<div>id: \".concat(i, \", contribs: \").concat(num, \", content: \").concat(content, \", weiStaked: \").concat(staked, \"  </div>\");\n            } else {\n              if (staked.toNumber() === 0) {\n                wememe.ownerOf.call(i, function (e, owner) {\n                  memeGallery.innerHTML += \"<div>id: \".concat(i, \", content: \").concat(content, \", owner: \").concat(owner, \"  </div>\");\n                });\n              } else {\n                memeStore.innerHTML += \"<div>id: \".concat(i, \", content: \").concat(content, \", weiPrice: \").concat(staked, \"  </div>\");\n              }\n            }\n          });\n        });\n      });\n    };\n\n    for (var i = 0; i < num; i++) {\n      _loop(i);\n    }\n  });\n});\nexport var startWeMeme = function startWeMeme() {\n  ethereum.enable().then(function (addrs) {\n    // eslint-disable-line no-undef\n    var address = addrs[0];\n    var Wememe = web3.eth.contract(abi); // eslint-disable-line no-undef\n\n    var wememeContract = Wememe.at('0x7B55a715AD5e82956CA6F3093D7Eb3C16C308a78');\n    Box.getProfile(address).then(function (res) {\n      // eslint-disable-line no-undef\n      var profile = res;\n      store.dispatch({\n        type: 'WEMEME_CONTRACT',\n        wememeContract: wememeContract,\n        address: address,\n        profile: profile\n      });\n    }).catch(function (err) {\n      store.dispatch({\n        type: 'WEMEME_CONTRACT',\n        wememeContract: wememeContract,\n        address: address\n      });\n    });\n  });\n};\nexport var getMemes = function getMemes() {\n  store.getState().threeBox.wememeContract.topId.call(function (e, r) {\n    var num = r.toNumber();\n    var forDraw = [];\n    var forCaption = [];\n    var forSale = [];\n    var forGallery = [];\n    var count = 0;\n\n    var checkEndAndUpdateState = function checkEndAndUpdateState(num) {\n      _readOnlyError(\"count\"), count++;\n\n      if (count === num) {\n        store.dispatch({\n          type: 'UPDATE_MEMES',\n          forDraw: forDraw,\n          forCaption: forCaption,\n          forSale: forSale,\n          forGallery: forGallery\n        });\n      }\n    };\n\n    var _loop2 = function _loop2(i) {\n      wememeContract.num.call(i, function (e, num) {\n        wememeContract.content.call(i, function (e, content) {\n          wememeContract.poolBalance.call(i, function (e, staked) {\n            if (num === 1) {\n              // for draw\n              forDraw.push({\n                id: i,\n                content: content,\n                staked: staked\n              });\n              checkEndAndUpdateState(num);\n            } else if (num === 2) {\n              // for caption\n              forCaption.push({\n                id: i,\n                content: content,\n                staked: staked\n              });\n              checkEndAndUpdateState(num);\n            } else {\n              if (staked.toNumber() === 0) {\n                // already sold\n                wememeContract.ownerOf.call(i, function (e, owner) {\n                  forGallery.push({\n                    id: i,\n                    content: content,\n                    owner: owner\n                  });\n                });\n                checkEndAndUpdateState(num);\n              } else {\n                // available for purchase\n                forSale.push({\n                  id: i,\n                  content: content,\n                  price: staked\n                });\n                checkEndAndUpdateState(num);\n              }\n            }\n          });\n        });\n      });\n    };\n\n    for (var i = 0; i < num; i++) {\n      _loop2(i);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/kenzo/Desktop/app/src/utils/smartContract.js"],"names":["store","abi","ethereum","enable","then","addrs","addr","asdf","user","innerHTML","Wememe","web3","eth","contract","wememe","at","shares","addEventListener","e","r","priceToMint","call","pid","value","price","wei","fromWei","meme","mid","numShares","contentHash","from","tx","console","log","buyMeme","poolBalance","buyId","buy","topId","num","toNumber","i","content","staked","memeData","ownerOf","owner","memeGallery","memeStore","startWeMeme","address","wememeContract","Box","getProfile","res","profile","dispatch","type","catch","err","getMemes","getState","threeBox","forDraw","forCaption","forSale","forGallery","count","checkEndAndUpdateState","push","id"],"mappings":"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","sourcesContent":["import {\n  store\n} from '../state/store';\n\nconst abi = [{\n    \"anonymous\": false,\n    \"inputs\": [{\n        \"indexed\": true,\n        \"name\": \"_owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"name\": \"_operator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"_approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"ApprovalForAll\",\n    \"type\": \"event\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"approve\",\n    \"outputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [{\n        \"indexed\": true,\n        \"name\": \"_owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"name\": \"_approved\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Approval\",\n    \"type\": \"event\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n      \"name\": \"id\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"buy\",\n    \"outputs\": [],\n    \"payable\": true,\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [{\n        \"indexed\": true,\n        \"name\": \"_from\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": true,\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Transfer\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [{\n        \"indexed\": false,\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"totalCost\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"Memed\",\n    \"type\": \"event\"\n  },\n  {\n    \"anonymous\": false,\n    \"inputs\": [{\n        \"indexed\": false,\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"creator\",\n        \"type\": \"address\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"indexed\": false,\n        \"name\": \"reward\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"Rewarded\",\n    \"type\": \"event\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"numTokens\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"_content\",\n        \"type\": \"string\"\n      }\n    ],\n    \"name\": \"meme\",\n    \"outputs\": [],\n    \"payable\": true,\n    \"stateMutability\": \"payable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"numTokens\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"priceToMint\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"numTokens\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"rewardForBurn\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"_from\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"_data\",\n        \"type\": \"bytes\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"_from\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"safeTransferFrom\",\n    \"outputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_approved\",\n        \"type\": \"bool\"\n      }\n    ],\n    \"name\": \"setApprovalForAll\",\n    \"outputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": false,\n    \"inputs\": [{\n        \"name\": \"_from\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_to\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_tokenId\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"transferFrom\",\n    \"outputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"function\"\n  },\n  {\n    \"inputs\": [],\n    \"payable\": false,\n    \"stateMutability\": \"nonpayable\",\n    \"type\": \"constructor\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_owner\",\n      \"type\": \"address\"\n    }],\n    \"name\": \"balanceOf\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"balances\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"content\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      },\n      {\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"creators\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"address\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_tokenId\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"exists\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"bool\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_tokenId\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"getApproved\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"address\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"InterfaceId_ERC165\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"bytes4\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n        \"name\": \"_owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_operator\",\n        \"type\": \"address\"\n      }\n    ],\n    \"name\": \"isApprovedForAll\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"bool\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"num\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_tokenId\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"ownerOf\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"address\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"poolBalance\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_interfaceId\",\n      \"type\": \"bytes4\"\n    }],\n    \"name\": \"supportsInterface\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"bool\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_index\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"tokenByIndex\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n        \"name\": \"_owner\",\n        \"type\": \"address\"\n      },\n      {\n        \"name\": \"_index\",\n        \"type\": \"uint256\"\n      }\n    ],\n    \"name\": \"tokenOfOwnerByIndex\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"_tokenId\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"tokenURI\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"string\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"topId\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"totalSupply\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"name\": \"totalSupply_\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"uint256\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"wememe\",\n    \"outputs\": [{\n      \"name\": \"\",\n      \"type\": \"address\"\n    }],\n    \"payable\": false,\n    \"stateMutability\": \"view\",\n    \"type\": \"function\"\n  }\n]\n\nethereum.enable().then(addrs => {\n  const addr = addrs[0]\n  const asdf = 234\n  user.innerHTML = `<threebox-address data-address='${addr}'></threebox-address>`\n  const Wememe = web3.eth.contract(abi);\n  const wememe = Wememe.at('0x7B55a715AD5e82956CA6F3093D7Eb3C16C308a78')\n\n  shares.addEventListener('change', (e, r) => {\n    wememe.priceToMint.call(pid.value, shares.value, {}, (e, price) => {\n      wei.value = web3.fromWei(price, 'ether')\n    })\n  })\n\n  meme.addEventListener('click', () => {\n    wememe.priceToMint.call(mid.value, numShares.value, {}, (e, price) => {\n      wememe.meme(mid.value, numShares.value, contentHash.value, {\n        from: addr,\n        value: price\n      }, (e, tx) => {\n        console.log('meme', tx)\n      })\n    })\n  })\n\n  buyMeme.addEventListener('click', () => {\n    wememe.poolBalance.call(buyId.value, (e, price) => {\n      wememe.buy(buyId.value, {\n        from: addr,\n        value: price\n      }, (e, tx) => {\n        console.log('buy', tx)\n      })\n    })\n  })\n\n  wememe.topId.call((e, r) => {\n    const num = r.toNumber()\n    for (let i = 0; i < num; i++) {\n      wememe.num.call(i, (e, num) => {\n        wememe.content.call(i, (e, content) => {\n          wememe.poolBalance.call(i, (e, staked) => {\n            if (num < 3) {\n              memeData.innerHTML += `<div>id: ${i}, contribs: ${num}, content: ${content}, weiStaked: ${staked}  </div>`\n            } else {\n              if (staked.toNumber() === 0) {\n                wememe.ownerOf.call(i, (e, owner) => {\n                  memeGallery.innerHTML += `<div>id: ${i}, content: ${content}, owner: ${owner}  </div>`\n                })\n              } else {\n                memeStore.innerHTML += `<div>id: ${i}, content: ${content}, weiPrice: ${staked}  </div>`\n              }\n            }\n          })\n        })\n      })\n    }\n  })\n})\n\nexport const startWeMeme = () => {\n  ethereum.enable().then(addrs => { // eslint-disable-line no-undef\n    const address = addrs[0]\n    const Wememe = web3.eth.contract(abi); // eslint-disable-line no-undef\n    const wememeContract = Wememe.at('0x7B55a715AD5e82956CA6F3093D7Eb3C16C308a78')\n\n    Box.getProfile(address).then(res => { // eslint-disable-line no-undef\n      const profile = res;\n      store.dispatch({\n        type: 'WEMEME_CONTRACT',\n        wememeContract,\n        address,\n        profile,\n      })\n    }).catch(err => {\n      store.dispatch({\n        type: 'WEMEME_CONTRACT',\n        wememeContract,\n        address,\n      })\n    })\n  })\n}\n\nexport const getMemes = () => {\n  store.getState().threeBox.wememeContract.topId.call((e, r) => {\n    const num = r.toNumber()\n    const forDraw = [];\n    const forCaption = [];\n    const forSale = [];\n    const forGallery = [];\n    const count = 0;\n\n    const checkEndAndUpdateState = (num) => {\n      count++;\n      if (count === num) {\n        store.dispatch({\n          type: 'UPDATE_MEMES',\n          forDraw,\n          forCaption,\n          forSale,\n          forGallery,\n        })\n      }\n    }\n\n    for (let i = 0; i < num; i++) {\n      wememeContract.num.call(i, (e, num) => {\n        wememeContract.content.call(i, (e, content) => {\n          wememeContract.poolBalance.call(i, (e, staked) => {\n            if (num === 1) {\n              // for draw\n              forDraw.push({\n                id: i,\n                content,\n                staked,\n              })\n              checkEndAndUpdateState(num);\n            } else if (num === 2) {\n              // for caption\n              forCaption.push({\n                id: i,\n                content,\n                staked,\n              })\n              checkEndAndUpdateState(num);\n            } else {\n              if (staked.toNumber() === 0) {\n                // already sold\n                wememeContract.ownerOf.call(i, (e, owner) => {\n                  forGallery.push({\n                    id: i,\n                    content,\n                    owner,\n                  })\n                })\n                checkEndAndUpdateState(num);\n              } else {\n                // available for purchase\n                forSale.push({\n                  id: i,\n                  content,\n                  price: staked,\n                })\n                checkEndAndUpdateState(num);\n              }\n            }\n          })\n        })\n      })\n    }\n  })\n}"]},"metadata":{},"sourceType":"module"}