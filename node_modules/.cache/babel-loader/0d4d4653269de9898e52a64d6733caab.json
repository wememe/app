{"ast":null,"code":"'use strict';\n\nvar assert = require('assert');\n\nvar createBuildStream = require('./create-build-stream');\n\nvar Builder = require('./builder');\n\nvar reducers = {\n  flat: require('./flat'),\n  balanced: require('./balanced'),\n  trickle: require('./trickle')\n};\nvar defaultOptions = {\n  strategy: 'balanced',\n  highWaterMark: 100,\n  reduceSingleLeafToSelf: true\n};\n\nmodule.exports = function (Chunker, ipld, _options) {\n  assert(Chunker, 'Missing chunker creator function');\n  assert(ipld, 'Missing IPLD');\n  var options = Object.assign({}, defaultOptions, _options);\n  var strategyName = options.strategy;\n  var reducer = reducers[strategyName];\n  assert(reducer, 'Unknown importer build strategy name: ' + strategyName);\n  var createStrategy = Builder(Chunker, ipld, reducer, options);\n  return createBuildStream(createStrategy, ipld, options);\n};","map":null,"metadata":{},"sourceType":"script"}