{"ast":null,"code":"var noop = function noop() {};\n\nfunction abortAll(ary, abort, cb) {\n  var n = ary.length;\n  if (!n) return cb(abort);\n  ary.forEach(function (f) {\n    if (f) f(abort, next);else next();\n  });\n\n  function next() {\n    if (--n) return;\n    cb(abort);\n  }\n\n  if (!n) next();\n}\n\nmodule.exports = function (streams) {\n  return function (abort, cb) {\n    ;\n\n    (function next() {\n      if (abort) abortAll(streams, abort, cb);else if (!streams.length) cb(true);else if (!streams[0]) streams.shift(), next();else streams[0](null, function (err, data) {\n        if (err) {\n          streams.shift(); //drop the first, has already ended.\n\n          if (err === true) next();else abortAll(streams, err, cb);\n        } else cb(null, data);\n      });\n    })();\n  };\n};","map":null,"metadata":{},"sourceType":"script"}