{"ast":null,"code":"module.exports = function (socket, callback) {\n  var remove = socket && (socket.removeEventListener || socket.removeListener);\n\n  function cleanup() {\n    if (typeof remove == 'function') {\n      remove.call(socket, 'open', handleOpen);\n      remove.call(socket, 'error', handleErr);\n    }\n  }\n\n  function handleOpen(evt) {\n    cleanup();\n    callback();\n  }\n\n  function handleErr(evt) {\n    cleanup();\n    callback(evt);\n  } // if the socket is closing or closed, return end\n\n\n  if (socket.readyState >= 2) {\n    return callback(true);\n  } // if open, trigger the callback\n\n\n  if (socket.readyState === 1) {\n    return callback();\n  }\n\n  socket.addEventListener('open', handleOpen);\n  socket.addEventListener('error', handleErr);\n};","map":null,"metadata":{},"sourceType":"script"}