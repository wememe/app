{"ast":null,"code":"'use strict';\n\nvar asyncMap = require('pull-stream/throughs/async-map');\n\nvar limitStreamBytes = function limitStreamBytes(limit) {\n  var bytesRead = 0;\n  return asyncMap(function (buffer, cb) {\n    if (bytesRead > limit) {\n      return cb(true); // eslint-disable-line standard/no-callback-literal\n    } // If we only need to return part of this buffer, slice it to make it smaller\n\n\n    if (bytesRead + buffer.length > limit) {\n      buffer = buffer.slice(0, limit - bytesRead);\n    }\n\n    bytesRead = bytesRead + buffer.length;\n    cb(null, buffer);\n  });\n};\n\nmodule.exports = limitStreamBytes;","map":null,"metadata":{},"sourceType":"script"}