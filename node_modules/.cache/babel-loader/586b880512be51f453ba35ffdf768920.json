{"ast":null,"code":"import { store } from '../state/store';\nexport var address = typeof window.web3 !== 'undefined' ? window.web3.eth.accounts[0] : ''; // eslint-disable-line no-undef\n\nwindow.localStorage.setItem('userEthAddress', address);\nconsole.log(window.localStorage.getItem('userEthAddress'));\nvar prevAddress;\n\nvar pollNetworkAndAddress = function pollNetworkAndAddress() {\n  setTimeout(function () {\n    var currentAddress = typeof window.web3 !== 'undefined' ? window.web3.eth.accounts[0] : ''; // eslint-disable-line no-undef\n    // Logged out of MM while logged in to 3Box\n\n    if (currentAddress !== address && currentAddress === undefined && store.getState().threeBox.isLoggedIn) {\n      prevAddress = address;\n      store.dispatch({\n        type: 'HANDLE_LOGGEDOUT_MODAL',\n        loggedOutModal: true\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    } // Logs out of 3Box\n\n\n    if (currentAddress !== address && currentAddress === undefined && store.getState().threeBox.isLoggedIn) {\n      store.dispatch({\n        type: 'HANDLE_LOGGEDOUT_MODAL',\n        loggedOutModal: true\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    } // Switched address\n\n\n    if (currentAddress !== address && typeof currentAddress === 'string' && currentAddress !== prevAddress && address !== undefined && store.getState().threeBox.isLoggedIn) {\n      prevAddress = address;\n      store.dispatch({\n        type: 'HANDLE_SWITCHED_ADDRESS_MODAL',\n        switchedAddressModal: true,\n        prevAddress: prevAddress\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    } // Switched back to previous address\n\n\n    if (currentAddress !== address && typeof currentAddress === 'string' && typeof address === 'string' && store.getState().threeBox.isLoggedIn && currentAddress === prevAddress) {\n      store.dispatch({\n        type: 'HANDLE_SWITCHED_ADDRESS_MODAL',\n        switchedAddressModal: false,\n        prevAddress: ''\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    } // Logged in to MM\n\n\n    if (currentAddress !== address && typeof currentAddress === 'string' && address === undefined && !window.ethereum) {\n      store.dispatch({\n        type: 'HANDLE_WALLET_LOGIN_DETECTED_MODAL',\n        isSignedIntoWallet: true,\n        hasWallet: true\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    } // Logged out of MM while not signed in to 3Box\n\n\n    if (currentAddress !== address && currentAddress === undefined) {\n      store.dispatch({\n        type: 'HANDLE_WALLET_LOGIN_DETECTED_MODAL',\n        isSignedIntoWallet: false,\n        hasWallet: false\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    address = currentAddress;\n    pollNetworkAndAddress();\n  }, 1000);\n};\n\npollNetworkAndAddress();\nexport default address;","map":{"version":3,"sources":["/Users/kenzo/Desktop/3box-dapp/src/utils/address.js"],"names":["store","address","window","web3","eth","accounts","localStorage","setItem","console","log","getItem","prevAddress","pollNetworkAndAddress","setTimeout","currentAddress","undefined","getState","threeBox","isLoggedIn","dispatch","type","loggedOutModal","switchedAddressModal","ethereum","isSignedIntoWallet","hasWallet"],"mappings":"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","sourcesContent":["import {\n  store,\n} from '../state/store';\n\nexport let address =\n  typeof window.web3 !== 'undefined' ? window.web3.eth.accounts[0] : ''; // eslint-disable-line no-undef\n\nwindow.localStorage.setItem('userEthAddress', address);\nconsole.log(window.localStorage.getItem('userEthAddress'));\nlet prevAddress;\n\nconst pollNetworkAndAddress = () => {\n  setTimeout(() => {\n    const currentAddress = typeof window.web3 !== 'undefined' ? window.web3.eth.accounts[0] : ''; // eslint-disable-line no-undef\n\n    // Logged out of MM while logged in to 3Box\n    if (currentAddress !== address &&\n      currentAddress === undefined &&\n      store.getState().threeBox.isLoggedIn) {\n      prevAddress = address;\n      store.dispatch({\n        type: 'HANDLE_LOGGEDOUT_MODAL',\n        loggedOutModal: true,\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    // Logs out of 3Box\n    if (currentAddress !== address &&\n      currentAddress === undefined &&\n      store.getState().threeBox.isLoggedIn) {\n      store.dispatch({\n        type: 'HANDLE_LOGGEDOUT_MODAL',\n        loggedOutModal: true,\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    // Switched address\n    if (currentAddress !== address &&\n      typeof currentAddress === 'string' &&\n      currentAddress !== prevAddress &&\n      address !== undefined &&\n      store.getState().threeBox.isLoggedIn) {\n      prevAddress = address;\n      store.dispatch({\n        type: 'HANDLE_SWITCHED_ADDRESS_MODAL',\n        switchedAddressModal: true,\n        prevAddress,\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    // Switched back to previous address\n    if (currentAddress !== address &&\n      typeof currentAddress === 'string' &&\n      typeof address === 'string' &&\n      store.getState().threeBox.isLoggedIn &&\n      currentAddress === prevAddress\n    ) {\n      store.dispatch({\n        type: 'HANDLE_SWITCHED_ADDRESS_MODAL',\n        switchedAddressModal: false,\n        prevAddress: '',\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    // Logged in to MM\n    if (currentAddress !== address &&\n      typeof currentAddress === 'string' &&\n      address === undefined &&\n      !window.ethereum) {\n      store.dispatch({\n        type: 'HANDLE_WALLET_LOGIN_DETECTED_MODAL',\n        isSignedIntoWallet: true,\n        hasWallet: true,\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    // Logged out of MM while not signed in to 3Box\n    if (currentAddress !== address &&\n      currentAddress === undefined) {\n      store.dispatch({\n        type: 'HANDLE_WALLET_LOGIN_DETECTED_MODAL',\n        isSignedIntoWallet: false,\n        hasWallet: false,\n      });\n      window.localStorage.setItem('userEthAddress', currentAddress);\n    }\n\n    address = currentAddress;\n    pollNetworkAndAddress();\n  }, 1000);\n};\n\npollNetworkAndAddress();\n\nexport default address;"]},"metadata":{},"sourceType":"module"}