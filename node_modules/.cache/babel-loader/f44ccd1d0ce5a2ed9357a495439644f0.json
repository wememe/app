{"ast":null,"code":"var source = require('./source');\n\nvar sink = require('./sink');\n\nmodule.exports = duplex;\n\nfunction duplex(ws, opts) {\n  var req = ws.upgradeReq || {};\n  if (opts && opts.binaryType) ws.binaryType = opts.binaryType;else if (opts && opts.binary) ws.binaryType = 'arraybuffer';\n  return {\n    source: source(ws, opts && opts.onConnect),\n    sink: sink(ws, opts),\n    //http properties - useful for routing or auth.\n    headers: req.headers,\n    url: req.url,\n    upgrade: req.upgrade,\n    method: req.method\n  };\n}\n\n;","map":null,"metadata":{},"sourceType":"script"}