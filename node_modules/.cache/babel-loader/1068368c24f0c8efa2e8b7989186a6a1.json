{"ast":null,"code":"/* eslint-env browser */\n'use strict';\n\nvar debug = require('debug');\n\nvar log = debug('jsipfs:preload');\nlog.error = debug('jsipfs:preload:error');\n\nmodule.exports = function preload(url, callback) {\n  log(url);\n  var controller = new AbortController();\n  var signal = controller.signal;\n  fetch(url, {\n    signal: signal\n  }).then(function (res) {\n    if (!res.ok) {\n      log.error('failed to preload', url, res.status, res.statusText);\n      throw new Error(\"failed to preload \".concat(url));\n    }\n\n    return res.text();\n  }).then(function () {\n    return callback();\n  }).catch(callback);\n  return {\n    cancel: function cancel() {\n      return controller.abort();\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script"}